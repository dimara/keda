<html>
<head>
    <title>Search for Available Appartments</title>
    {% include "includes/scripts.html" %}
</head>
<body>
    {% include "includes/menu.html" %}
    <b>Search for available Appartments based on various criteria</b><br>
    <form action="/availability/" method="get">
        <div class="form-row period">
            {% if date_errors %} <p style="color: red;" > {{ date_errors }} </p> {% endif %}
            <div>
                <label for="id_check_in">CheckIn:</label>
                <input id="id_check_in" type="text" class="vDateField"
                       name="check_in" size="10" {% if check_in %} value="{{ check_in }}" {% endif %} />
                <br>
                <label for="id_check_out">CheckOut:</label>
                <input id="id_check_out" type="text" class="vDateField"
                       name="check_out" size="10" {% if check_out %} value="{{ check_out }}" {% endif %} />
                <input type="submit" value="Search">
            </div>
        </div>
        <div class="form-row filters">
            <label for="id_area">Area:</label>
                <select name="area" id="id_area" onchange="this.form.submit()" >
                    <option value="">---------</option>
                    {% for a in areas %}
                    <option value="{{ a.0 }}" {% if area == a.0 %} selected="selected" {% endif %}> {{ a.1 }} </option>
                    {% endfor %}
                </select>
            <label for="id_category">Category:</label>
                <select name="category" id="id_category" onchange="this.form.submit()">
                    <option value="">---------</option>
                    {% for c in categories %}
                    <option value="{{ c.id }}" {% if category == c.id %} selected="selected" {% endif %}> {{ c.desc }} </option>
                    {% endfor %}
                </select>
                <label for="id_active" class="vCheckboxLabel">Include Damaged </label>
                <input type="checkbox" name="damaged" id="id_damaged" onchange="this.form.submit()"
                       {% if damaged %} checked="checked" {% endif %} />
        </div>
    </form>
      <br>
      <table border="1">
        <tr>
          <th></th>
          <th>Appartment</th>
          <th></th>
          <th></th>
        </tr>
        {% for a in avail %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ a.info }}</td>
          <td><a href="/appartments/{{ a.id }}/">info</a></td>
          <td><a href="/reservations/add/?appartment={{ a.id }}">reserve</a></td>
        </tr>
        {% endfor %}
      </table>
  </body>
</html>
