{% extends "base.html" %}

{% block title %}Persons{% endblock %}

{% block content %}
    <form action="/persons/" method="get">
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
              <input class="form-control" placeholder="Look for.." type="text" name="text" />
              </div><!-- /input-group -->
            </div><!-- /input-group -->
            <div class="col-md-1">
              <div class="form-group">
            @
              </div><!-- /input-group -->
            </div><!-- /input-group -->
            <div class="col-md-3">
              <div class="form-group">
              <select class="form-control" name="inside">
                  <option value="surnames"> Surnames</option>
                  <option value="vehicles"> Vehicles</option>
              </select>
              </div><!-- /input-group -->
            </div><!-- /input-group -->
          </div><!-- /input-group -->
        <div class="row">
      {% include "includes/search_filter.html" %}
          </div><!-- /input-group -->
    </form>

    {% include "includes/info.html" %}
    {% if trunc %}
    The following list is truncated! Please be more specific!
    {% endif %}
    <table class="table table-hover" id="table">
        <tr id="titles">
        <th></th>
        <th>Person</th>
        <th>Contacts</th>
        <th>Vehicles</th>
        <th>Reservations</th>
      </tr>
      {% for p in persons %}
      <tr>
        <td> {{ forloop.counter }}</td>
        {% with p as person %}
          <td> {% include "includes/person_display.html" %} </td>
        {% endwith %}
        <td>
        {% for c in p.contacts.all %}
            {{ c.mobile }}<br>
        {% endfor %}
        </td>
        <td>
        {% for v in p.vehicles.all %}
            {{ v.plate }}<br>
        {% endfor %}
        </td>
        <td>
        {% for r in p.reservations.all %}
            {{ r.details }}<br>
        {% endfor %}
        </td>
      </tr>
      {% endfor %}
      {% if trunc %}
      <tr>
        <td> ... </td>
        <td> ... </td>
        <td> ... </td>
        <td> ... </td>
        <td> ... </td>
      </tr>
      {% endif %}
    </table>
{% endblock %}
